<!DOCTYPE html>
<html lang="en">

<!--head.ejs파일로 다 옮겨놨음-->

<head>
    <%-include('head')%>
</head>

<body>
    <!-- 외부 브라우저 -->
    <script src="https://urlopen.link/direct.js"></script>
    <main id="root">
        <!-- test check for submitting the test -->
        <script src="script/useCookies.js"></script>
        <div id="page-transition"></div>
        <div class="fixed-elem">
            <div class="logo" id="backToTop">
                <img src="pics/Logo.svg" alt="B-Free" />
            </div>
            <div class="translation">
                <ul class="translation-options">
                    <li class="translation-option" id="menu">
                        <svg width="57" height="40" viewBox="0 0 57 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle class="svg_comp" cx="5" cy="5" r="5" fill="#C4C4C4" />
                            <circle class="svg_comp" cx="5" cy="20" r="5" fill="#C4C4C4" />
                            <circle class="svg_comp" cx="5" cy="35" r="5" fill="#C4C4C4" />
                            <rect class="svg_comp" x="17" width="40" height="10" rx="5" fill="#C4C4C4" />
                            <rect class="svg_comp" x="17" y="15" width="40" height="10" rx="5" fill="#C4C4C4" />
                            <rect class="svg_comp" x="17" y="30" width="40" height="10" rx="5" fill="#C4C4C4" />
                        </svg>
                        <ul id="path-menu">
                            <li class="path" id="pathToTop">Main</li>
                            <li class="path" id="pathToBeforeTest">Before Quiz</li>
                            <li class="path" id="pathToMiddle">Learn More</li>
                            <li class="path" id="pathToAfterTest">After Quiz</li>
                            <li class="path" id="pathToBottom">Scores</li>
                        </ul>
                    </li>
                    <li class="translation-option" id="kr"><a href="/">KR</a></li>
                    <li class="translation-option" id="en"><a href="/en">EN</a></li>
                </ul>
            </div>
        </div>

        <script src="./script/translation.js"></script>
        <div class="main main_top" id="main_top">
            <div class="top">
                <div class="img_container">
                    <img class="main_image" id="firstImage" src="pics/Main1.jpg" alt="두 사람이 나란히 가는 사진">
                </div>
                <div class="text_container">
                    <div class="large-text">
                        <div class="main_text">
                            <span>Barrier-Free</span>
                        </div>
                        <div class="main_text">
                            <span>B-Free</span>
                        </div>
                    </div>
                    <div class="small-text">
                        <div class="sub_text">
                            <span>We envision a world free from barriers and discrimination.</span>
                        </div>
                    </div>
                </div>
                <div class="nickname-form">
                    <form name="nickname">
                        <div class="nickname-container">
                            <input type="text" class="form-control" id="nickname" name="nick" placeholder="Nickname">
                            <div class="btn-container">
                                <button type="button" class="btn btn-lg custom-button" id="toBeforeTest">
                                    Start the quiz!
                                </button>
                            </div>
                        </div>
                        <label for="nickname" class="form-label">Enter your nickname to start the quiz!</label>
                    </form>
                </div>
            </div>
        </div>
        <script>
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            if (!isMobile) {
                gsap.timeline()
                    .from('body', {
                        duration: 0.5
                    }) // for loading
                    .from('.large-text', {
                        y: -100,
                        opacity: 0,
                        duration: 1
                    })
                    .from('.small-text', {
                        y: -100,
                        opacity: 0,
                        duration: 1
                    });

                const menu = document.querySelector("#menu");
                menu.addEventListener("mouseover", (e) => {
                    $('.svg_comp').css('fill', '#008B9F');
                    $('#path-menu').show();
                })

                menu.addEventListener("mouseleave", (e) => {
                    $('.svg_comp').css('fill', '#C4C4C4');
                    $('#path-menu').hide();
                })

            } else {
                const menu = document.querySelector("#menu");
                let menuBtnClick = false
                menu.addEventListener('click', e => {
                    if (menuBtnClick) {
                        $('.svg_comp').css('fill', '#C4C4C4');
                        $('#path-menu').hide();
                    } else {
                        $('.svg_comp').css('fill', '#008B9F');
                        $('#path-menu').show();
                    }
                    menuBtnClick = !menuBtnClick;
                })
            }
        </script>


        <!-- Before 인식개선 테스트 div -->
        <div class="main before_test test">
            <% if(BeforeScore === 'no') { %>
                <%-include('en_beforeTest')%>
                    <% } else {%>
                        <%-include('en_btResult')%>
                            <%}%>
        </div>
        <script>
            // test-swiper
            const beforeTest = new Swiper('#before-test-container', {
                // Optional parameters
                direction: 'horizontal',
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                keyboard: {
                    enabled: true,
                    onlyInViewport: true,
                },
                threshold: 10
            })
        </script>

        <!-- 메인 중단 -->
        <div class="main main_middle" id="main_middle">
            <div id="main_middle_container">
                <div class="above-comment" id="propose-passover">Swipe to see more photos👉</div>
                <div class="above-comment" id="ask-change">Did you notice the differences?</div>
                <div class="carousel-container">
                    <div class="swiper-container" id="img-container">
                        <div id="carousel" class="swiper-wrapper">
                            <div class="swiper-slide img-slide">
                                <img class="carousel_img" src="pics/carousel/carousel-1-1.jpg" alt="회의하는 사람들">
                            </div>
                            <div class="swiper-slide img-slide">
                                <img class="carousel_img" src="pics/carousel/carousel-1-2.jpg" alt="회의하는 사람들">
                            </div>
                            <div class="swiper-slide img-slide">
                                <img class="carousel_img" src="pics/carousel/carousel-2-1.jpg" alt="테니스 하는 사람">
                            </div>
                            <div class="swiper-slide img-slide">
                                <img class="carousel_img" src="pics/carousel/carousel-2-2.jpg" alt="테니스 하는 사람">
                            </div>
                            <div class="swiper-slide img-slide">
                                <img class="carousel_img" src="pics/carousel/carousel-3-1.jpg" alt="함께 모여서 사진찍는 사람들">
                            </div>
                            <div class="swiper-slide img-slide">
                                <img class="carousel_img" src="pics/carousel/carousel-3-2.jpg" alt="함께 모여서 사진찍는 사람들">
                            </div>
                            <div class="swiper-slide img-slide">
                                <img class="carousel_img" src="pics/carousel/carousel-4-1.jpg" alt="결혼식을 올리는 커플">
                            </div>
                            <div class="swiper-slide img-slide">
                                <img class="carousel_img" src="pics/carousel/carousel-4-2.jpg" alt="결혼식을 올리는 커플">
                            </div>
                        </div>
                        <div class="swiper-pagination"></div>
                        <div class="swiper-button-prev"></div>
                        <div class="swiper-button-next"></div>
                    </div>
                </div>
                <div class="img_comment"><span id="hide-comment" style="color: #008B9F; font-weight: 800;">Everybody
                    </span> is living an 
                    <span id="hide-comment" style="color: #008B9F; font-weight: 800;">everyday 
                    </span> normal life.</div>

                <script>
                    const imgContainers = gsap.utils.toArray('.swiper-slide.img-slide');
                    imgContainers.forEach((img, i) => {
                            img.dataset.index = i + 1;
                        })
                        // swiper
                    const swiper = new Swiper('#img-container', {
                        // Optional parameters
                        direction: 'horizontal',
                        pagination: {
                            el: '.swiper-pagination',
                            clickable: true
                        },
                        navigation: {
                            nextEl: '.swiper-button-next',
                            prevEl: '.swiper-button-prev',
                        },
                        autoplay: {
                            delay: 5000,
                        },
                        threshold: 10
                    })
                </script>


                <!-- The first statistics : the number of the people with disability -->
                <div class="overlay">
                    <div class="stat">
                        <div class="title">
                            <div class="number_container">
                                <div class="numbers">
                                    <span class="number">5</span><span class="percentage">%</span>
                                </div>
                            </div>
                            <div class="headline">
                                <div class="text1">
                                    1 out of 20 people
                                </div>
                                <div class="text2">
                                    As of the end of 2019, 2,618,000 registered persons with disabilities, 5.1% of the total population
                                </div>
                            </div>
                        </div>
                        <div class="pict_container">
                            <div class="pictogram">
                                <div class="hover_icon" id="hover_icon1">
                                    <div class="arrow"></div>
                                    <div class="background" data-index="1">
                                        <div class="color_box_hover">

                                        </div>
                                        <div class="label_hover">
                                            Disabled: 5.1%
                                        </div>
                                    </div>
                                </div>
                                <div class="hover_icon" id="hover_icon2">
                                    <div class="arrow"></div>
                                    <div class="background" data-index="2">
                                        <div class="color_box_hover">
                                        </div>
                                        <div class="label_hover">
                                            Non-disabled: 94.9%
                                        </div>
                                    </div>
                                </div>
                                <div class="pictogram_controls">
                                    <div class="control" data-index="1">
                                        <div class="color_box">

                                        </div>
                                        <div class="label">
                                            Disabled
                                        </div>
                                    </div>
                                    <div class="control" data-index="2">
                                        <div class="color_box">

                                        </div>
                                        <div class="label">
                                            Non-disabled
                                        </div>
                                    </div>
                                </div>
                                <div class="img_people">
                                    <img class="img_person img_person1" src="pics/human1.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                </div>
                                <div class="img_people">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                    <img class="img_person img_person2" src="pics/human2.svg" alt="사람">
                                </div>
                            </div>
                        </div>
                        <div class="source">
                            <span>
                                Source: Status of Registered Persons with Disabilities (2019)
                            </span>
                        </div>
                        <div class="comment">
                            We are all living together. To assume that none have disabilities just because you don’t see it could be discrimination as well.
                        </div>
                    </div>
                </div>

                <!-- Second Statistic : the cause of the disability -->
                <div class="overlay">
                    <div class="stat">
                        <div class="title">
                            <div class="number_container">
                                <div class="numbers">
                                    <span class="number">9</span><span class="percentage">people</span>
                                </div>
                            </div>
                            <div class="headline">
                                <div class="text1">
                                    9 out of 10 people
                                </div>
                                <div class="text2">
                                    88.1% are "acquired" disabilities
                                </div>
                            </div>
                        </div>
                        <div class="pict_container">
                            <div class="pictogram">
                                <canvas id="chart1"></canvas>
                                <script>
                                    let chart = new Chart(document.getElementById('chart1').getContext('2d'), getChartArgumentsEN()[0].chartConfig);
                                </script>
                            </div>
                        </div>
                        <div class="source">
                            <span>
                                Source: Status of Registered Persons with Disabilities (2017)
                            </span>
                        </div>
                        <div class="comment">
                            There are much more acquired disabilities due to accident or disease. Disability can happen to anyone, at any time.
                        </div>
                    </div>
                </div>

                <!-- The third statistics -->
                <div class="overlay">
                    <div class="stat">
                        <div class="title">
                            <div class="number_container">
                                <div class="numbers">
                                    <span class="number small">60.7</span><span class="percentage small">%</span>
                                </div>
                            </div>
                            <div class="headline">
                                <div class="text1">
                                    60.7% responded ‘I don’t know’
                                </div>
                                <div class="text2">
                                </div>
                            </div>
                        </div>
                        <div class="pict_container">
                            <div class="pictogram">
                                <canvas id="chart2"></canvas>
                                <script>
                                    let chart2 = new Chart(document.getElementById('chart2').getContext('2d'), getChartArgumentsEN()[1].chartConfig);
                                </script>
                            </div>
                        </div>
                        <div class="source">
                            <span>
                                Source: Status of Registered Persons with Disabilities (2017)
                            </span>
                        </div>
                        <div class="comment">
                            The Disability Discrimination Act was first enacted on April 10th, 2007 and enforced on April 11th, 2008. However, still many people do not know it.
                        </div>
                    </div>
                </div>

                <!-- The Fourth statistic -->
                <div class="overlay">
                    <div class="stat">
                        <div class="title">
                            <div class="number_container">
                                <div class="numbers">
                                    <span class="number small">48.9</span><span class="percentage small">%</span>
                                </div>
                            </div>
                            <div class="headline">
                                <div class="text1">
                                    The proportion of physical disability among 15 types of disabilities, 46.7%
                                </div>
                                <div class="text2">
                                </div>
                            </div>
                        </div>
                        <div class="pict_container">
                            <div class="pictogram">
                                <canvas id="chart3"></canvas>
                                <script>
                                    let chart3 = new Chart(document.getElementById('chart3').getContext('2d'), getChartArgumentsEN()[2].chartConfig);
                                </script>
                            </div>
                        </div>
                        <div class="source">
                            <span>
                                Source: Status of Registered Persons with Disabilities (2019)
                            </span>
                        </div>
                        <div class="comment">
                            According to the welfare law for the disabled, there are 15 types of disabilities (physical disability, brain lesion, visual impairment, hearing impairment, speech disorder, facial disorder; renal disorder, cardiac lesion, respiratory disorder, hepatosis,
                            ostomy, epilepsy; intellectual disability, autism, mental disorder,). The most common type of disability is ‘physical disability’.
                        </div>
                    </div>
                </div>

                <!-- The fifth statistic -->
                <div class="overlay">
                    <div class="stat">
                        <div class="title">
                            <div class="number_container">
                                <div class="numbers">
                                    <span class="number">15</span><span class="percentage">times</span>
                                </div>
                            </div>
                            <div class="headline">
                                <div class="text1">
                                    Crime rate of the people with mental illness, 0.08%
                                </div>
                                <div class="text2">
                                </div>
                            </div>
                        </div>
                        <div class="pict_container">
                            <div class="pictogram">
                                <canvas id="chart4"></canvas>
                                <script>
                                    let chart4 = new Chart(document.getElementById('chart4').getContext('2d'), getChartArgumentsEN()[3].chartConfig);
                                </script>
                            </div>
                        </div>
                        <div class="source">
                            <span>
                                Source: Supreme Prosecutors’ Office Crime Analysis Report (2017)
                            </span>
                        </div>
                        <div class="comment">
                            Statistically the crime rate of non-disabled people is 15 times higher than that of people with mental illness. Disability could never be the cause of a crime.
                        </div>
                    </div>
                </div>

                <div class="btn-container" id="btn-after-test">
                    <button type="button" class="btn btn-lg" id="toAfterTest">Let's start the quiz!</button>
                </div>

                <div class="video-comment">
                    Learn more about disability!
                </div>
                <div class="video-comment" id="second-video-comment">
                    Drag for more videos!👉
                </div>

                <!-- 회전초밥 div -->
                <div class="owl-carousel owl-theme owl-loaded">
                    <div class="item">
                        <a href="https://www.youtube.com/watch?v=CdFqM5fekqI" target="_blank">
                            <img src="https://img.youtube.com/vi/CdFqM5fekqI/maxresdefault.jpg"></a>
                        <span class="tooltiptext">The 1st Korean Sign Language Day</span>
                    </div>
                    <div class="item">
                        <a href="https://www.youtube.com/watch?v=XN2OC9UVVuA" target="_blank">
                            <img src="https://img.youtube.com/vi/XN2OC9UVVuA/maxresdefault.jpg"></a>
                        <span class="tooltiptext">Life as a college student with a disability</span>
                    </div>
                    <div class="item">
                        <a href="https://www.youtube.com/watch?v=LS4WS7V0Y_A" target="_blank">
                            <img src="https://img.youtube.com/vi/LS4WS7V0Y_A/maxresdefault.jpg"></a>
                        <span class="tooltiptext">Being a handy rapper with hearing impairment</span>

                    </div>
                    <div class="item">
                        <a href="https://www.youtube.com/watch?v=MCZqR2VCP28" target="_blank">
                            <img src="https://img.youtube.com/vi/MCZqR2VCP28/maxresdefault.jpg"></a>
                        <span class="tooltiptext">Being a ballerina with hearing impairment</span>

                    </div>
                    <div class="item">
                        <a href="https://www.youtube.com/watch?v=REpjJyKifms" target="_blank">
                            <img src="https://img.youtube.com/vi/REpjJyKifms/maxresdefault.jpg"></a>
                        <span class="tooltiptext">We tried 'The Quiet Taxi'</span>

                    </div>
                    <div class="item">
                        <a href="https://www.youtube.com/watch?v=5gc4y9ExmHw" target="_blank">
                            <img src="https://img.youtube.com/vi/5gc4y9ExmHw/maxresdefault.jpg"></a>
                        <span class="tooltiptext">The 40th day of the disabled</span>

                    </div>
                    <div class="item">
                        <a href="https://www.youtube.com/watch?v=kJrRzI0Tm80" target="_blank">
                            <img src="https://img.youtube.com/vi/kJrRzI0Tm80/maxresdefault.jpg"></a>
                        <span class="tooltiptext">Campaign for visual/hearing impairment awareness improvement</span>

                    </div>
                    <div class="item">
                        <a href="https://www.youtube.com/watch?v=6KER4bgyozg" target="_blank">
                            <img src="https://img.youtube.com/vi/6KER4bgyozg/maxresdefault.jpg"></a>
                        <span class="tooltiptext">😧 Can we be friends with a person with cerebral palsy</span>

                    </div>
                </div>

                <script src="./owlcarousel/owl.carousel.min.js"></script>
                <script type="text/javascript">
                    var owl = $('.owl-carousel');
                    owl.owlCarousel({
                        items: 4,
                        loop: true,
                        margin: 20,
                        video: true,
                        autoplay: true,
                        autoplayTimeout: 3000,
                        autoplayHoverPause: true
                    });
                    $('.owl-carousel').owlCarousel();
                </script>
                <style>
                    .owl-carousel .owl-stage-outer {
                        overflow: visible;
                    }
                    
                    .item .tooltiptext {
                        background-color: rgba(0, 0, 0, 0.7);
                    }
                </style>

                <footer class="ref-container" style="margin-top:10vh">
                    <hr>
                    <ul>
                        <li>photos <a target="_blank" href="https://www.freepik.com/photos/business">carousel-1 | </a>
                            <a target="_blank" href="https://www.freepik.com/photos/health">carousel-2 | </a>
                            <a target="_blank" href="https://unsplash.com/@elevatebeer?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">carousel-3
                                | </a>
                            <a target="_blank" href="https://www.freepik.com/photos/love">carousel-4 </a>
                        </li>
                        <li>about <a target="_blank" href="https://www.facebook.com/dschufs/">DSC | </a>
                            <a target="_blank" href="https://github.com/DSCHUFS/Solution_Challenge_WSC"> github </a>
                        </li>
                        <li>Copyright 2021 <a href="https://b-freeproject.df.r.appspot.com/"> B-Free. </a> All rights reserved
                        </li>
                        </li>
                    </ul>
                    <hr>
                </footer>
            </div>
            <script>
                gsap.registerPlugin(ScrollTrigger);
                let overlay = gsap.utils.toArray('.overlay');
                overlay.forEach((ol, i) => {
                    ol.dataset.colorIndex = i;
                    if (!isMobile) {
                        gsap.from(ol, {
                            scrollTrigger: {
                                trigger: ol,
                                toggleActions: 'play reset play reset',
                                scroller: '.main_middle'
                            },
                            x: 50 * Math.pow(-1, i),
                            duration: 0.7
                        })
                    }
                })
            </script>
        </div>


        <!-- After 인식개선 테스트 div -->
        <div class="main after_test test">
            <% if(AfterScore=='no' ) { %>
                <%-include('en_afterTest')%>
                    <% } else {%>
                        <%-include('en_atResult')%>
                            <%}%>
        </div>

        <script>
            // test-swiper
            const afterTest = new Swiper('#after-test-container', {
                // Optional parameters
                direction: 'horizontal',
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                keyboard: {
                    enabled: true,
                    onlyInViewport: true,
                },
                threshold: 10
            })
        </script>


        <div class="main main_bottom" id="main_bottom">
            <div class="chart-comment-container" id="score-comment-container">
                <div class="chart-comment" id="first-score-comment">🙌
                    <%=Nickname%>
                </div>
                <% if(BeforeScore=='no' || AfterScore=='no' ){ %>
                    <div class="not-yet-test">
                        <div class="not-yet-test-comment">
                            You didn't take all the quizzes yet 😢
                        </div>
                        <div class="not-yet-test-comment">
                            Please come back after you're done with the quiz.
                        </div>
                        <div id="menu-desc-comment">
                            Use the shortcut for the quiz in the menu!
                        </div>
                    </div>
                    <% } else { %>
                        <div class="own-score chart-comment" id="before-own-score">
                            <div class="test-first-score-comment" id="before-first-score-comment">Your Before Quiz score is</div>
                            <div class="test-second-score-comment" id="before-second-score-comment">
                                <span class="correct-count" style="color: rgba(255, 206, 86, 1)">
                                    <%=BeforeScore%>
                                </span>out of
                                <span class="total-count">10</span>
                            </div>
                        </div>

                        <div class="own-score chart-comment" id="after-own-score">
                            <div class="test-first-score-comment" id="after-first-score-comment">Your After Quiz score is</div>
                            <div class="test-second-score-comment" id="after-second-score-comment">
                                <span class="correct-count" style="color: rgba(54, 162, 235, 1)">
                                    <%=AfterScore%>
                                </span>out of
                                <span class="total-count">10</span>

                            </div>
                        </div>
                        <div class="chart-comment" id="last-score-comment"></div>
                        <% } %>
            </div>

            <div class="chart-comment-container" id="propose-comment">
                Check out others' scores!
            </div>
            <div class="score-chart-container">
                <div class="score-chart" id="first-chart">
                    <div class="inside-container">
                        <div class="chart-title">
                            Disability awareness quiz score distribution
                        </div>
                        <div class="compareChart" id="beforeCompareChart">
                            <canvas id="beforeChart">
                                <p>Feedback Chart1-1</p>
                            </canvas>
                        </div>
                    </div>
                    <div class="chart-desc" id="first-chart-desc">
                        <div class="chart-desc-comment">
                            <div class="chart-desc-div first-chart-desc">
                                The more the blue line is skewed to the right, the better the awareness has been improved through our service!
                            </div>
                            <div class="chart-desc-div first-chart-desc">
                                Compare users' Before and After Quiz scores!
                            </div>
                        </div>
                    </div>
                </div>
                <div class="score-chart" id="second-chart">
                    <div class="inside-container">
                        <div class="chart-title">
                            Score increase after using B-Free
                        </div>
                        <div class="compareChart" id="increaseCompareChart">
                            <canvas id="increaseChart">
                                <p>Feedback Chart2</p>
                            </canvas>
                        </div>
                    </div>
                    <div class="chart-desc" id="second-chart-desc">
                        <div class="chart-desc-comment">
                            <div class="chart-desc-div second-chart-desc">
                                The larger the green part, the more people have received a better score in the After Quiz.
                            </div>
                            <div class="chart-desc-div second-chart-desc">
                                Check out whose scores have risen!
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- footer -->
            <footer class="ref-container">
                <script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
                <a href="javascript:;" id="kakao-link-btn">
                    <img src="//developers.kakao.com/assets/img/about/logos/kakaolink/kakaolink_btn_medium.png" />
                </a>
                <script type="text/javascript">
                    // // 사용할 앱의 JavaScript 키를 설정해 주세요.
                    Kakao.init('0073c546637db7e74322970e75cbcc1f');
                    $("#kakao-link-btn").click(function(e) {
                        e.preventDefault();

                        Kakao.Link.sendCustom({
                            templateId: 50286
                        });
                    });
                </script>
                <div style="display: inline;"> 👈Share B-Free via Kakao talk!🥰</div>
                <hr>
                <ul>
                    <li>photos <a target="_blank" href="https://www.freepik.com/photos/business">carousel-1 | </a>
                        <a target="_blank" href="https://www.freepik.com/photos/health">carousel-2 | </a>
                        <a target="_blank" href="https://unsplash.com/@elevatebeer?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">carousel-3
                            | </a>
                        <a target="_blank" href="https://www.freepik.com/photos/love">carousel-4 </a>
                    </li>
                    <li>about <a target="_blank" href="https://www.facebook.com/dschufs/">DSC | </a>
                        <a target="_blank" href="https://github.com/DSCHUFS/Solution_Challenge_WSC"> github </a>
                    </li>
                    <li>Copyright 2021 <a href="https://b-freeproject.df.r.appspot.com/"> B-Free. </a> All rights reserved
                    </li>
                    </li>
                </ul>
                <hr>
            </footer>
        </div>


    </main>


    <script src="./script/chartUtil.js"></script>
    <script src="./script/pageTransition.js"></script>
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <script type="text/javascript">
        afterSubmitPageTransition();

        function checkOnlyOne(element) { //체크박스 한 개만 선택되도록 하는 함수
            var formN = element.name;
            var checkboxes = document.getElementsByName(formN);
            checkboxes.forEach((cb) => {
                cb.checked = false;
            })
            element.checked = true;
            // console.log(element.value);
        }

        //nickname form 제출 시, 호출되는 함수
        const btn = document.querySelector('#toBeforeTest');
        btn.addEventListener("click", e => {
            submitNickname();
        });

        function submitNickname() {
            var queryString = $("form[name=nickname]").serialize();
            if (queryString === "nick=") {
                alert("Enter your nickname!");
            } else {
                $.ajax({
                    type: 'post',
                    url: '/nickname',
                    data: queryString,
                    dataType: 'json',
                    success: function(result) {
                        console.log(result);
                        if (result.msg == "overlap")
                            alert("A corresponding nickname already exists. Please enter another nickname!");
                        else if (result.msg == "registered") {
                            alert("You have already registered your nickname. Please run the test😊");
                            pageTransition(".before_test", 0);
                            Cookies.set('curPage', ".before_test");
                        } else {
                            alert("Reigster successfully.");
                            pageTransition(".before_test", 0);
                            Cookies.set('curPage', ".before_test");
                        }
                    },
                    error: function(xhr, status, error) {
                        console.log(error);
                    }
                });
            }
        }

        //before test form 제출 시, 호출되는 함수
        function submitBefore() {
            //serialize: form 태그내의 항목들을 자동으로 읽어와 queryString 형식으로 변환
            var queryString = $("form[name=before]").serialize();
            $.ajax({
                type: 'post',
                url: '/before',
                data: queryString,
                dataType: 'json',
                success: function(result) {
                    console.log(result);
                    if (result.msg == "notRegistered") {
                        alert("Please register your nickname!");
                        pageTransition("#main_top", 0);
                    } else if (result.msg == "fine") {
                        alert("Submit successfully!");
                    }
                    location.reload();
                },
                error: function(xhr, status, error) {
                    console.log(error);
                }
            });
        }

        //after test form 제출 시, 호출되는 함수
        function submitAfter() {
            var queryString = $("form[name=after]").serialize();
            $.ajax({
                type: 'post',
                url: '/after',
                data: queryString,
                dataType: 'json',
                success: function(result) {
                    console.log(result);
                    if (result.msg == "notRegistered") {
                        alert("Please register your nickname!");
                        pageTransition("#main_top", 0);
                    } else if (result.msg == "yetBefore") {
                        alert("Please submit the first test!");
                        pageTransition(".before_test", 0);
                    } else if (result.msg == "fine") {
                        alert("Submit successfully!");
                    }
                    location.reload();
                },
                error: function(xhr, status, error) {
                    console.log(error);
                }
            });
        }

        //test 다시보기 버튼 클릭 시, 호출되는 함수
        function testAgain() {
            $.ajax({
                type: 'post',
                url: '/again',
                success: function(result) {
                    if (result.msg == "again")
                        alert("Re-test this test.");
                    location.reload();
                },
                error: function(xhr, status, error) {
                    console.log(error);
                }
            });
        }
    </script>

    <!-- socket communication -->
    <!-- socket.io -->
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var count;
        var score;
        var socket = io();

        //after 테스트를 정상적으로 제출한 경우
        socket.on('completeAfter', function(result) {
            console.log(result);
            count = result.Count.count;
            score = result.Score;

            //update된 db data 받아, feedback chart에 반영
            var beforeCtx = document.getElementById('beforeChart').getContext('2d');
            var increaseCtx = document.getElementById('increaseChart').getContext('2d');
            var beforeChart = new Chart(beforeCtx, getChart(score, count)[0]);
            var increaseChart = new Chart(increaseCtx, getChart(score, count)[1]);
        });

        function getChart(score, count) {
            return [{
                    type: 'line',
                    data: {
                        labels: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                        datasets: [{
                            label: 'Score Distribution- Before using our service',
                            data: [score.b0, score.b1, score.b2, score.b3, score.b4, score.b5, score.b6, score.b7, score.b8, score.b9, score.b10],
                            backgroundColor: 'rgba(255, 206, 86, 0.7)',
                            borderColor: 'rgba(255, 206, 86, 1)',
                            borderWidth: 1
                        }, {
                            label: 'Score Distribution- After using  our service',
                            data: [score.a0, score.a1, score.a2, score.a3, score.a4, score.a5, score.a6, score.a7, score.a8, score.a9, score.a10],
                            backgroundColor: 'rgba(54, 162, 235, 0.7)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero: true
                                }
                            }]
                        },
                        legend: {
                            position: 'top',
                            onHover: () => {
                                document.getElementById("beforeChart").style.cursor = 'pointer'
                            },
                            onLeave: () => {
                                document.getElementById("beforeChart").style.cursor = 'default'
                            }
                        },
                        animation: {
                            duration: 1500
                        }
                    }
                },

                {
                    type: 'pie',
                    data: {
                        labels: ["Increase", "Decrease"],
                        datasets: [{
                            label: 'Score changes After using our service',
                            data: [score.increase, (count - score.increase)],
                            backgroundColor: [
                                "#48C9B0", "#E5E7E9"
                            ]
                        }]
                    },
                    options: {
                        legend: {
                            position: 'left',
                            onHover: () => {
                                document.getElementById("increaseChart").style.cursor = 'pointer'
                            },
                            onLeave: () => {
                                document.getElementById("increaseChart").style.cursor = 'default'
                            }
                        },
                        ticks: {
                            display: false
                        },
                        animation: {
                            duration: 2000
                        },
                        gridLines: {
                            display: true,
                            drawTicks: false
                        }
                    }
                }
            ]
        }

        //main bottom에서 새로고침 시, 서버에서 넘겨준 db data로 chart 생성
        $(function() {
            var Count = JSON.parse('<%-JSON.stringify(Count)%>');
            var Score = JSON.parse('<%-JSON.stringify(Score)%>');
            //feedback chart
            var beforeCtx = document.getElementById('beforeChart').getContext('2d');
            var increaseCtx = document.getElementById('increaseChart').getContext('2d');
            var beforeChart = new Chart(beforeCtx, getChart(Score, Count.count)[0]);
            var increaseChart = new Chart(increaseCtx, getChart(Score, Count.count)[1]);
        });
    </script>

</body>

</html>